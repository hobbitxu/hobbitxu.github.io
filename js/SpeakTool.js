"use strict";!function(e){function i(e){return new i.prototype.init(e)}i.extend=(i.prototype={constructor:i,version:"2020-08-17 v2",page:1,total_page:1,per_page:3,owner:"antmoe",repo:"speak",total_count:0,text:[],defaultLabelName:"Default",defaultLabelColor:"#ffc107",nickname:"XiaoKangðŸ¦„",highlightcss:"https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.1/styles/monokai-sublime.min.css",emojiLabel:{},init:function(e){for(var t in e)this[t]=e[t];return console.log("\n %c XiaoKang's Speak"+this.version+" %c https://docs.tzki.cn/Speak \n","color: #fff; background: #4285f4; padding:5px 0;","background: #66CCFF; padding:5px 0;"),i.setHead(this,i.getPageSpeak(this)),i.bindBtn(this),this}}).extend=function(e){for(var t in e)this[t]=e[t]},i.extend({setHead:function(){i.noRefer(),i.loadingCss(),$.getScript("https://cdn.bootcss.com/highlight.js/9.18.1/highlight.min.js"),$.getScript("https://cdn.jsdelivr.net/npm/marked/marked.min.js")},noRefer:function(){$("head").append('<meta name="referrer" content="no-referrer" />')},loadingCss:function(){$("head").append("<style>.loader{width:150px;height:150px;margin:0 auto}svg{width:90%;fill:none}.load{transform-origin:50% 50%;stroke-dasharray:570;stroke-width:20px}.load.one{stroke:#554d73;animation:load 1.5s infinite}.load.two{stroke:#a496a4;animation:load 1.5s infinite;animation-delay:.1s}.load.three{stroke:#a5a7bb;animation:load 1.5s infinite;animation-delay:.2s}.point{animation:bounce 1s infinite ease-in-out}.point.one{fill:#a5a7bb;animation-delay:0s}.point.two{fill:#a496a4;animation-delay:.1s}.point.three{fill:#554d73;animation-delay:.2s}@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-20px)}}@keyframes load{0%{stroke-dashoffset:570}50%{stroke-dashoffset:530}100%{stroke-dashoffset:570;transform:rotate(360deg)}}</style>")},loading:function(){$(".is-container").html('<div class="loader"><svg viewBox="0 0 120 120" version="1.1" xmlns="http://www.w3.org/2000/svg"><circle class="load one" cx="60" cy="60" r="40"></circle><circle class="load two" cx="60" cy="60" r="40"></circle><circle class="load three" cx="60" cy="60" r="40"></circle><g><circle class="point one" cx="45" cy="70" r="5"></circle><circle class="point two" cx="60" cy="70" r="5"></circle><circle class="point three" cx="75" cy="70" r="5"></circle></g></svg></div>')}}),i.extend({getSpeak:function(s){return $.ajax({url:"https://gitee.com/api/v5/repos/"+s.owner+"/"+s.repo+"/issues?state=open&sort=created&direction=desc&page="+s.page+"&per_page="+s.per_page+"&creator="+s.owner,type:"get",success:function(e,t,a){if(s.text=[],s.total_count=a.getResponseHeader("total_count"),s.total_page=Math.ceil(s.total_count/s.per_page),e)for(var n in e){var o={};o.comments=e[n].comments,o.body=i.getBody(e[n].body),o.labels=i.getLabels(s,e[n].labels),o.created_at=i.getTime(e[n].created_at),o.html_url=e[n].html_url,s.text.push(o)}}})},bindBtn:function(t){$(".prev").click(function(e){e.preventDefault(),--t.page,i.getPageSpeak(t)}),$(".next").click(function(e){e.preventDefault(),t.page+=1,i.getPageSpeak(t)})},getPageSpeak:function(e){i.loading(),i.getSpeak(e).then(function(){return i.createSpeak(e)})}}),i.extend({createSpeak:function(e){var t="",a=e.text;for(var n in a)t+='<div class="is-issue" style="transform-origin: center top;"><div class="is-issue-content">\n                <div class="is-issue-header"><span class="is-issue-username">'.concat(e.nickname,'</span><span\n                        class="is-verified-badge"><svg class="is-badge" viewBox="0 0 512 512"\n                            xmlns="http://www.w3.org/2000/svg">\n                            <path\n                                d="m512 268c0 17.9-4.3 34.5-12.9 49.7s-20.1 27.1-34.6 35.4c.4 2.7.6 6.9.6 12.6 0 27.1-9.1 50.1-27.1 69.1-18.1 19.1-39.9 28.6-65.4 28.6-11.4 0-22.3-2.1-32.6-6.3-8 16.4-19.5 29.6-34.6 39.7-15 10.2-31.5 15.2-49.4 15.2-18.3 0-34.9-4.9-49.7-14.9-14.9-9.9-26.3-23.2-34.3-40-10.3 4.2-21.1 6.3-32.6 6.3-25.5 0-47.4-9.5-65.7-28.6-18.3-19-27.4-42.1-27.4-69.1 0-3 .4-7.2 1.1-12.6-14.5-8.4-26-20.2-34.6-35.4-8.5-15.2-12.8-31.8-12.8-49.7 0-19 4.8-36.5 14.3-52.3s22.3-27.5 38.3-35.1c-4.2-11.4-6.3-22.9-6.3-34.3 0-27 9.1-50.1 27.4-69.1s40.2-28.6 65.7-28.6c11.4 0 22.3 2.1 32.6 6.3 8-16.4 19.5-29.6 34.6-39.7 15-10.1 31.5-15.2 49.4-15.2s34.4 5.1 49.4 15.1c15 10.1 26.6 23.3 34.6 39.7 10.3-4.2 21.1-6.3 32.6-6.3 25.5 0 47.3 9.5 65.4 28.6s27.1 42.1 27.1 69.1c0 12.6-1.9 24-5.7 34.3 16 7.6 28.8 19.3 38.3 35.1 9.5 15.9 14.3 33.4 14.3 52.4zm-266.9 77.1 105.7-158.3c2.7-4.2 3.5-8.8 2.6-13.7-1-4.9-3.5-8.8-7.7-11.4-4.2-2.7-8.8-3.6-13.7-2.9-5 .8-9 3.2-12 7.4l-93.1 140-42.9-42.8c-3.8-3.8-8.2-5.6-13.1-5.4-5 .2-9.3 2-13.1 5.4-3.4 3.4-5.1 7.7-5.1 12.9 0 5.1 1.7 9.4 5.1 12.9l58.9 58.9 2.9 2.3c3.4 2.3 6.9 3.4 10.3 3.4 6.7-.1 11.8-2.9 15.2-8.7z"\n                                fill="#1da1f2"></path>\n                        </svg></span><span class="is-issue-text">Â·</span><span class="is-issue-date">').concat(a[n].created_at,"</span>\n                        <div>\n                      ").concat(a[n].labels,'\n                        </div>\n                        </div>\n                <div class="is-issue-body markdown-body">\n                    ').concat(a[n].body,'\n                </div>\n                <div class="is-issue-footer"><a href="').concat(a[n].html_url,'" target="_blank" class="is-issue-icon is-issue-comment">\n                        <div class="is-icon-comment-wrap"><svg class="is-icon" aria-hidden="true">\n                                <svg id="icon-comment" viewBox="0 0 1024 1024">\n                                    <path\n                                        d="M722.26133333 387.45429333c0-47.15861333-36.864-85.71562667-81.92-85.71562666H75.09333333v367.57504C75.09333333 716.44501333 111.95733333 755.02933333 157.01333333 755.02933333h81.92v165.25994667a27.77088 27.77088 0 0 0 32.08533334 28.23509333L307.2 910.67733333h3.74101333L391.85066667 826.02666667h3.14026666L462.848 755.02933333h259.41333333z"\n                                        fill="#a6c4e1"></path>\n                                    <path\n                                        d="M861.52533333 162.47466667v505.17333333H425.49248l-25.8048 27.00629333L326.31466667 771.41333333v-103.76533333H162.47466667V162.47466667h699.05066666m5.46133334-87.38133334H157.01333333c-45.056 0-81.92 38.55701333-81.92 85.71562667v508.50474667C75.09333333 716.44501333 111.95733333 755.02933333 157.01333333 755.02933333h81.92v165.25994667A27.93472 27.93472 0 0 0 266.45845333 948.90666667a26.13248 26.13248 0 0 0 19.11466667-8.43776L462.848 755.02933333h404.13866667c45.056 0 81.92-38.55701333 81.92-85.68832V160.80896C948.90666667 113.65034667 912.04266667 75.09333333 866.98666667 75.09333333z"\n                                        fill="#333333"></path>\n                                    <path\n                                        d="M315.392 375.46666667a43.69066667 43.69066667 0 1 0 43.69066667 43.69066666 43.69066667 43.69066667 0 0 0-43.69066667-43.69066666zM708.608 375.46666667a43.69066667 43.69066667 0 1 0 43.69066667 43.69066666 43.69066667 43.69066667 0 0 0-43.69066667-43.69066666zM512 375.46666667a43.69066667 43.69066667 0 1 0 43.69066667 43.69066666 43.69066667 43.69066667 0 0 0-43.69066667-43.69066666z"\n                                        fill="#333333"></path>\n                                </svg>\n                            </svg></div><span class="is-comment-count">').concat(a[n].comments,"</span>\n                    </a></div>\n            </div></div>");$(".is-container").html(t),i.createPage(e)},createPage:function(e){$(".page").text(e.page+" / "+e.total_page),1!=e.total_page&&1==e.page?$(".next").show():e.page==e.total_page&&1!=e.page?$(".next").hide():e.page<e.total_page&&$(".next").show(),1<e.page?$(".prev").show():$(".prev").hide()}}),i.extend({getFontColor:function(e){var o=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;String.prototype.colorRgb=function(){var e=this.toLowerCase();if(e&&o.test(e)){if(4===e.length){for(var t="#",a=1;a<4;a+=1)t+=e.slice(a,a+1).concat(e.slice(a,a+1));e=t}for(var n=[],a=1;a<7;a+=2)n.push(parseInt("0x"+e.slice(a,a+2)));return"RGB("+n.join(",")+")"}return e};var t="white",a=e.colorRgb(),n=(a=(a=a.replace("RGB(","")).replace(")","")).split(",");return 450<parseInt(n[0])+parseInt(n[1])+parseInt(n[2])&&(t="black"),t},getLabels:function(e,t){var a="";if(t.length)for(var n in t)e.emojiLabel[t[n].name]&&(t[n].name=e.emojiLabel[t[n].name]+t[n].name),a+='<span class="is-issue-label"\n                        style="background-color: #'.concat(t[n].color,"; color: ").concat(i.getFontColor(t[n].color),';">').concat(t[n].name,"\n                        </span>");else a='<span class="is-issue-label"\n                        style="background-color: '.concat(e.defaultLabelColor,"; color: ").concat(i.getFontColor(e.defaultLabelColor),';">').concat(e.defaultLabelName,"</span>");return a},getBody:function(e){var t=new marked.Renderer;return marked.setOptions({highlight:function(e){return hljs.highlightAuto(e).value}}),t.image=function(e,t,a){return'<a style="cursor: zoom-in" data-caption="'.concat(a,'" data-fancybox="gallery" href=').concat(e,'><img class="lazyload" src="').concat(e,'" data-src=').concat(e,' alt="').concat(a,'"></a>')},marked(e,{renderer:t})},getTime:function(e){return Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e},new Date(e).format("yyyy-MM-dd hh:mm:ss")}}),i.prototype.extend({s:1}),i.prototype.init.prototype=i.prototype,e.Speak=i}(window);